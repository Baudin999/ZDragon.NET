var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function a(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function s(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function p(){return u(" ")}function h(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.data!==e&&(t.data=e)}function f(t,e,n,a){t.style.setProperty(e,n,a?"important":"")}let v;function y(t){v=t}function w(t){(function(){if(!v)throw new Error("Function called outside component initialization");return v})().$$.on_mount.push(t)}const _=[],x=[],$=[],b=[],k=Promise.resolve();let C=!1;function T(t){$.push(t)}function q(){const t=new Set;do{for(;_.length;){const t=_.shift();y(t),A(t.$$)}for(;x.length;)x.pop()();for(let e=0;e<$.length;e+=1){const n=$[e];t.has(n)||(n(),t.add(n))}$.length=0}while(_.length);for(;b.length;)b.pop()();C=!1}function A(t){null!==t.fragment&&(t.update(t.dirty),a(t.before_update),t.fragment&&t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(T))}const O=new Set;let z;function S(){z={r:0,c:[],p:z}}function D(){z.r||a(z.c),z=z.p}function E(t,e){t&&t.i&&(O.delete(t),t.i(e))}function j(t,e,n,a){if(t&&t.o){if(O.has(t))return;O.add(t),z.c.push(()=>{O.delete(t),a&&(n&&t.d(1),a())}),t.o(e)}}function N(t){t&&t.c()}function L(t,n,o){const{fragment:l,on_mount:r,on_destroy:c,after_update:s}=t.$$;l&&l.m(n,o),T(()=>{const n=r.map(e).filter(i);c?c.push(...n):a(n),t.$$.on_mount=[]}),s.forEach(T)}function P(t,e){const n=t.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx={})}function M(t,e){t.$$.dirty||(_.push(t),C||(C=!0,k.then(q)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function H(e,i,o,l,r,c){const s=v;y(e);const d=i.props||{},u=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(s?s.$$.context:[]),callbacks:n(),dirty:null};let p=!1;u.ctx=o?o(e,d,(t,n,a=n)=>(u.ctx&&r(u.ctx[t],u.ctx[t]=a)&&(u.bound[t]&&u.bound[t](a),p&&M(e,t)),n)):d,u.update(),p=!0,a(u.before_update),u.fragment=!!l&&l(u.ctx),i.target&&(i.hydrate?u.fragment&&u.fragment.l(function(t){return Array.from(t.childNodes)}(i.target)):u.fragment&&u.fragment.c(),i.intro&&E(e.$$.fragment),L(e,i.target,i.anchor),q()),y(s)}class X{$destroy(){P(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function B(t){let e,n,a,i,o,s;return{c(){e=d("br"),n=p(),a=d("a"),i=u("Show me the data!"),m(a,"alt",o=t.descriptor.name),m(a,"href",s=`/api/data/${t.descriptor.module}/${t.descriptor.name}`)},m(t,o){r(t,e,o),r(t,n,o),r(t,a,o),l(a,i)},p(t,e){t.descriptor&&o!==(o=e.descriptor.name)&&m(a,"alt",o),t.descriptor&&s!==(s=`/api/data/${e.descriptor.module}/${e.descriptor.name}`)&&m(a,"href",s)},d(t){t&&c(e),t&&c(n),t&&c(a)}}}function I(e){let n,a,i,o,s,f,v,y,w,_,x,$,b,k,C,T,q,A,O,z,S,D,E=e.descriptor.descriptorType+"",j=e.descriptor.module+"",N=e.descriptor.parent?e.descriptor.parent+".":"",L=e.descriptor.name+"",P=(e.descriptor.description||"No Description")+"",M=e.descriptor.module+"",H="Type"===e.descriptor.descriptorType&&B(e);return{c(){n=d("div"),a=d("h2"),i=d("span"),o=u(E),s=p(),f=u(j),v=u(" - "),y=u(N),w=u(L),_=p(),x=d("p"),$=u(P),b=p(),k=d("a"),C=u("Module: "),T=u(M),O=p(),H&&H.c(),z=p(),S=d("div"),m(i,"class","pill svelte-a0oi16"),m(a,"class","svelte-a0oi16"),m(x,"class","description svelte-a0oi16"),m(k,"alt",q=e.descriptor.module),m(k,"href",A=`/${e.descriptor.module}/index.html`),m(S,"id",e.id),m(n,"class","descriptor svelte-a0oi16"),D=h(n,"click",e.click_handler)},m(t,e){r(t,n,e),l(n,a),l(a,i),l(i,o),l(a,s),l(a,f),l(a,v),l(a,y),l(a,w),l(n,_),l(n,x),l(x,$),l(n,b),l(n,k),l(k,C),l(k,T),l(n,O),H&&H.m(n,null),l(n,z),l(n,S)},p(t,e){t.descriptor&&E!==(E=e.descriptor.descriptorType+"")&&g(o,E),t.descriptor&&j!==(j=e.descriptor.module+"")&&g(f,j),t.descriptor&&N!==(N=e.descriptor.parent?e.descriptor.parent+".":"")&&g(y,N),t.descriptor&&L!==(L=e.descriptor.name+"")&&g(w,L),t.descriptor&&P!==(P=(e.descriptor.description||"No Description")+"")&&g($,P),t.descriptor&&M!==(M=e.descriptor.module+"")&&g(T,M),t.descriptor&&q!==(q=e.descriptor.module)&&m(k,"alt",q),t.descriptor&&A!==(A=`/${e.descriptor.module}/index.html`)&&m(k,"href",A),"Type"===e.descriptor.descriptorType?H?H.p(t,e):((H=B(e)).c(),H.m(n,z)):H&&(H.d(1),H=null)},i:t,o:t,d(t){t&&c(n),H&&H.d(),D()}}}function Y(t,e,n){let{descriptor:a}=e,i=async t=>{let e=`/api/svg?module=${t.module}&name=${t.name}&type=g`,n=await fetch(e),a=await n.text();var i=document.getElementById(o);mermaid.render("inner-"+o,a,(t,e)=>{i.innerHTML=t},i)},o="mermaid-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)+"-"+Date.now();return t.$set=t=>{"descriptor"in t&&n("descriptor",a=t.descriptor)},{descriptor:a,selectNode:i,id:o,click_handler:()=>i(a)}}class F extends X{constructor(t){super(),H(this,t,Y,I,o,{descriptor:0})}}function R(e){let n;return{c(){(n=d("div")).innerHTML='<h2>Commands</h2> \n  <p>\n    This home page is not only a page where you can search items. This is also\n    the page where you can issue commands to the ZDragon backend system!\n  </p> \n  <p>You can use the following commands:</p> \n  <div class="command-container"><div class="command">modules:</div> \n    <span>This will search for all of the modules in the system.</span></div> \n\n  <div class="command-container"><div class="command">new: &lt;module name&gt;</div> \n    <span>\n      This will create a new module in the file system. You are free to choose\n      your own name for the module. Spaces will be changed to dots and every\n      word should start with a capital letter.\n    </span></div> \n\n  <div class="command-container"><div class="command">&lt;text&gt;</div> \n    <span>\n      This will let you free format search for the data in the repository.\n    </span></div> \n\n  <p>\n    Yes, the &quot;:&quot; should be at the end of a command. The &quot;:&quot; makes a command a\n    command! Commands can have terms behind them. For example, creating a new\n    modules is:\n  </p> \n  <p class="command">new: &lt;module name&gt;</p>',m(n,"class","help")},m(t,e){r(t,n,e)},p:t,i:t,o:t,d(t){t&&c(n)}}}class Z extends X{constructor(t){super(),H(this,t,null,R,o,{})}}function J(t,e,n){const a=Object.create(t);return a.d=e[n],a}function U(e){let n;return{c(){(n=d("div")).textContent="Your query returned no results."},m(t,e){r(t,n,e)},p:t,i:t,o:t,d(t){t&&c(n)}}}function K(t){let e,n,a=t.data,i=[];for(let e=0;e<a.length;e+=1)i[e]=V(J(t,a,e));const o=t=>j(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=u("")},m(t,a){for(let e=0;e<i.length;e+=1)i[e].m(t,a);r(t,e,a),n=!0},p(t,n){if(t.data){let l;for(a=n.data,l=0;l<a.length;l+=1){const o=J(n,a,l);i[l]?(i[l].p(t,o),E(i[l],1)):(i[l]=V(o),i[l].c(),E(i[l],1),i[l].m(e.parentNode,e))}for(S(),l=a.length;l<i.length;l+=1)o(l);D()}},i(t){if(!n){for(let t=0;t<a.length;t+=1)E(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)j(i[t]);n=!1},d(t){s(i,t),t&&c(e)}}}function V(t){let e;const n=new F({props:{descriptor:t.d}});return{c(){N(n.$$.fragment)},m(t,a){L(n,t,a),e=!0},p(t,e){const a={};t.data&&(a.descriptor=e.d),n.$set(a)},i(t){e||(E(n.$$.fragment,t),e=!0)},o(t){j(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function W(t){let e,n,a,i,o,s,u,g,f,v,y,w,_,x;const $=[K,U],b=[];function k(t,e){return e.data&&e.data.length>0?0:1}v=k(0,t),y=b[v]=$[v](t);const C=new Z({});return{c(){(e=d("h1")).textContent="Welcome to ZDragon!",n=p(),(a=d("p")).innerHTML='\n  Visit\n  <a href="https://zdragon.nl" target="_blank" rel="noopener noreferrer">\n    ZDragon.nl\n  </a>\n  to learn more about zdragon!\n',i=p(),o=d("div"),(s=d("h2")).textContent="Search your models:",u=p(),g=d("input"),f=p(),y.c(),w=p(),N(C.$$.fragment),m(e,"class","title"),m(g,"type","text"),x=h(g,"keyup",t.keyup_handler)},m(t,c){r(t,e,c),r(t,n,c),r(t,a,c),r(t,i,c),r(t,o,c),l(o,s),l(o,u),l(o,g),r(t,f,c),b[v].m(t,c),r(t,w,c),L(C,t,c),_=!0},p(t,e){let n=v;(v=k(0,e))===n?b[v].p(t,e):(S(),j(b[n],1,1,()=>{b[n]=null}),D(),(y=b[v])||(y=b[v]=$[v](e)).c(),E(y,1),y.m(w.parentNode,w))},i(t){_||(E(y),E(C.$$.fragment,t),_=!0)},o(t){j(y),j(C.$$.fragment,t),_=!1},d(t){t&&c(e),t&&c(n),t&&c(a),t&&c(i),t&&c(o),t&&c(f),b[v].d(t),t&&c(w),P(C,t),x()}}}function G(t,e,n){let a=[];const i=async t=>{try{var e=await fetch(`/api/search/${t||"nothing"}`);n("data",a=await e.json())}catch(t){console.log(t)}},o=async t=>{try{var e=await fetch("/api/modules/"+t,{method:"POST"});await e.json(),setTimeout(()=>{window.location.href=`/index.html?path=editor&module=${t}`},500)}catch(t){console.log(t)}};let l=t=>{"Enter"===t.code&&(async t=>{let[e,n,...a]=t.split(":");n||i(e),"modules"==e.trim()?i("modules:"):"new"==e.trim()&&n&&o(n.trim())})(t.target.value)};return{data:a,onkeyup:l,keyup_handler:t=>l(t)}}class Q extends X{constructor(t){super(),H(this,t,G,W,o,{})}}const tt=[];function et(e,n=t){let a;const i=[];function l(t){if(o(e,t)&&(e=t,a)){const t=!tt.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),tt.push(n,e)}if(t){for(let t=0;t<tt.length;t+=2)tt[t][0](tt[t+1]);tt.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(o,r=t){const c=[o,r];return i.push(c),1===i.length&&(a=n(l)||t),o(e),()=>{const t=i.indexOf(c);-1!==t&&i.splice(t,1),0===i.length&&(a(),a=null)}}}}var nt=new class{constructor(){this.route=et(at("path")||"index"),this.params=et([]),this.module=at("module")||null}navigate(t,...e){this.route.update(e=>t),this.params.update(t=>e||[]),function(t,e,n){n||(n=window.location.href);var a,i=new RegExp("([?&])"+t+"=.*?(&|#|$)(.*)","gi");if(!i.test(n)){if(null!=e){var o=-1!==n.indexOf("?")?"&":"?";return a=n.split("#"),n=a[0]+o+t+"="+e,void 0!==a[1]&&null!==a[1]&&(n+="#"+a[1]),window.location.href=n,n}return n}if(null==e)return a=n.split("#"),n=a[0].replace(i,"$1$3").replace(/(&|\?)$/,""),void 0!==a[1]&&null!==a[1]&&(n+="#"+a[1]),window.location.href=n,n;var l=n.replace(i,"$1"+t+"="+e+"$2$3");window.location.href=l}("path",t)}subscribe(t){this.route.subscribe(t)}$params(t){this.params.subscribe(t)}};function at(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}function it(t,e,n){const a=Object.create(t);return a.d=e[n],a}function ot(t){let e,n,i,o,s,f,v,y,w,_,x,$,b,k,C,T,q,A=t.d.domain+"",O=t.d.name+"",z=t.d.description+"",S=t.d.dataOwner+"";function D(...e){return t.click_handler_2(t,...e)}function E(...e){return t.click_handler_3(t,...e)}return{c(){e=d("div"),n=d("div"),i=u(A),o=p(),s=d("div"),f=u(O),v=p(),y=d("div"),w=u(z),_=p(),x=d("div"),$=u("Owner: "),b=u(S),k=p(),(C=d("span")).textContent="X",T=p(),m(n,"class","item--name svelte-q471s4"),m(s,"class","item--name svelte-q471s4"),m(x,"class","item--description__owner svelte-q471s4"),m(y,"class","item--description svelte-q471s4"),m(C,"class","item__delete svelte-q471s4"),m(e,"class","item svelte-q471s4"),q=[h(s,"click",D),h(C,"click",E)]},m(t,a){r(t,e,a),l(e,n),l(n,i),l(e,o),l(e,s),l(s,f),l(e,v),l(e,y),l(y,w),l(y,_),l(y,x),l(x,$),l(x,b),l(e,k),l(e,C),l(e,T)},p(e,n){t=n,e.data&&A!==(A=t.d.domain+"")&&g(i,A),e.data&&O!==(O=t.d.name+"")&&g(f,O),e.data&&z!==(z=t.d.description+"")&&g(w,z),e.data&&S!==(S=t.d.dataOwner+"")&&g(b,S)},d(t){t&&c(e),a(q)}}}function lt(e){let n,i,o,u,g,f,v,y,w,_,x,$,b,k,C,T=e.data,q=[];for(let t=0;t<T.length;t+=1)q[t]=ot(it(e,T,t));return{c(){(n=d("h1")).textContent="Search your lexicon!",i=p(),o=d("div"),(u=d("span")).textContent="Create",g=p(),(f=d("span")).textContent="Admin",v=p(),(y=d("h2")).textContent="Search your lexicon:",w=p(),_=d("input"),x=p(),$=d("div"),(b=d("div")).innerHTML='<div class="item--name svelte-q471s4">Domain</div> \n    <div class="item--name svelte-q471s4">Name</div> \n    <div class="item--description svelte-q471s4">Description</div>',k=p();for(let t=0;t<q.length;t+=1)q[t].c();m(n,"class","title"),m(u,"class","nav-button"),m(f,"class","nav-button"),m(_,"type","text"),m(b,"class","item svelte-q471s4"),m($,"class","items svelte-q471s4"),C=[h(u,"click",e.click_handler),h(f,"click",e.click_handler_1),h(_,"keyup",e.keyup_handler),h(_,"change",e.change_handler)]},m(t,e){r(t,n,e),r(t,i,e),r(t,o,e),l(o,u),l(o,g),l(o,f),l(o,v),l(o,y),l(o,w),l(o,_),r(t,x,e),r(t,$,e),l($,b),l($,k);for(let t=0;t<q.length;t+=1)q[t].m($,null)},p(t,e){if(t.deleteItem||t.data||t.navigator){let n;for(T=e.data,n=0;n<T.length;n+=1){const a=it(e,T,n);q[n]?q[n].p(t,a):(q[n]=ot(a),q[n].c(),q[n].m($,null))}for(;n<q.length;n+=1)q[n].d(1);q.length=T.length}},i:t,o:t,d(t){t&&c(n),t&&c(i),t&&c(o),t&&c(x),t&&c($),s(q,t),a(C)}}}function rt(t,e,n){let a=[],i="",o=async t=>{if(t){i=t;var e=await fetch("/api/lexicon?query="+i),o=await e.json();n("data",a=o||[])}},l=async t=>{alert("Only administrators are allowed to delete lexicon items.")},r=t=>{o(t)};return{data:a,findData:o,deleteItem:l,onkeyup:r,click_handler:()=>{nt.navigate("add-lexicon")},click_handler_1:()=>{nt.navigate("lexicon-admin")},keyup_handler:t=>"Enter"===t.code&&r(t.target.value),change_handler:t=>o(t.target.value),click_handler_2:({d:t})=>nt.navigate("edit-lexicon",t.id),click_handler_3:({d:t})=>l()}}class ct extends X{constructor(t){super(),H(this,t,rt,lt,o,{})}}function st(t,e,n){const a=Object.create(t);return a.tag=e[n],a}function dt(t,e,n){const a=Object.create(t);return a.application=e[n],a}function ut(t){let e,n,a,i,o,s,f=t.application+"";function v(...e){return t.click_handler(t,...e)}return{c(){e=d("div"),n=u(f),a=p(),(i=d("span")).textContent="X",o=p(),m(i,"class","delete svelte-hsis99"),s=h(i,"click",v)},m(t,c){r(t,e,c),l(e,n),l(e,a),l(e,i),l(e,o)},p(e,a){t=a,e.data&&f!==(f=t.application+"")&&g(n,f)},d(t){t&&c(e),s()}}}function pt(t){let e,n,a,i,o,s,f=t.tag+"";function v(...e){return t.click_handler_1(t,...e)}return{c(){e=d("div"),n=u(f),a=p(),(i=d("span")).textContent="X",o=p(),m(i,"class","delete svelte-hsis99"),s=h(i,"click",v)},m(t,c){r(t,e,c),l(e,n),l(e,a),l(e,i),l(e,o)},p(e,a){t=a,e.data&&f!==(f=t.tag+"")&&g(n,f)},d(t){t&&c(e),s()}}}function ht(e){let n,i,o,u,g,v,y,w,_,x,$,b,k,C,T,q,A,O,z,S,D,E,j,N,L,P,M,H,X,B,I,Y,F,R,Z,J,U,K,V,W,G,Q=e.data.applications,tt=[];for(let t=0;t<Q.length;t+=1)tt[t]=ut(dt(e,Q,t));let et=e.data.tags,nt=[];for(let t=0;t<et.length;t+=1)nt[t]=pt(st(e,et,t));return{c(){(n=d("h1")).textContent="Create your Lexicon entry!",i=p(),o=d("form"),u=d("div"),g=d("div"),(v=d("label")).textContent="Domain:",y=p(),w=d("input"),_=p(),x=d("div"),($=d("label")).textContent="Name:",b=p(),k=d("input"),C=p(),T=d("div"),(q=d("label")).textContent="Description:",A=p(),O=d("textarea"),z=p(),S=d("div"),(D=d("label")).textContent="Data owner:",E=p(),j=d("input"),N=p(),L=d("div"),P=d("div"),(M=d("label")).textContent="Applications:",H=p(),X=d("div"),B=d("input"),I=p();for(let t=0;t<tt.length;t+=1)tt[t].c();Y=p(),F=d("div"),(R=d("label")).textContent="Tags:",Z=p(),J=d("div"),U=d("input"),K=p();for(let t=0;t<nt.length;t+=1)nt[t].c();V=p(),(W=d("button")).textContent="Add",m(n,"class","title"),m(v,"class","svelte-hsis99"),m(w,"class","svelte-hsis99"),m($,"class","svelte-hsis99"),m(k,"class","svelte-hsis99"),m(q,"class","svelte-hsis99"),m(O,"class","svelte-hsis99"),m(D,"class","svelte-hsis99"),m(j,"class","svelte-hsis99"),m(u,"class","left svelte-hsis99"),m(M,"class","svelte-hsis99"),B.value=e.newApplication,m(B,"class","svelte-hsis99"),m(X,"class","input"),f(P,"margin-bottom","1em"),m(R,"class","svelte-hsis99"),U.value=e.newTag,m(U,"class","svelte-hsis99"),m(J,"class","input"),m(L,"class","right svelte-hsis99"),m(o,"class","svelte-hsis99"),m(W,"type","button"),m(W,"class","svelte-hsis99"),G=[h(w,"change",(function(){e.change_handler.apply(this,arguments)})),h(k,"change",(function(){e.change_handler_1.apply(this,arguments)})),h(O,"change",(function(){e.change_handler_2.apply(this,arguments)})),h(j,"change",(function(){e.change_handler_3.apply(this,arguments)})),h(B,"change",e.changeApplication),h(B,"keyup",e.keyup_handler),h(U,"change",e.changeTag),h(U,"keyup",e.keyup_handler_1),h(W,"click",e.submit)]},m(t,e){r(t,n,e),r(t,i,e),r(t,o,e),l(o,u),l(u,g),l(g,v),l(g,y),l(g,w),l(u,_),l(u,x),l(x,$),l(x,b),l(x,k),l(u,C),l(u,T),l(T,q),l(T,A),l(T,O),l(u,z),l(u,S),l(S,D),l(S,E),l(S,j),l(o,N),l(o,L),l(L,P),l(P,M),l(P,H),l(P,X),l(X,B),l(P,I);for(let t=0;t<tt.length;t+=1)tt[t].m(P,null);l(L,Y),l(L,F),l(F,R),l(F,Z),l(F,J),l(J,U),l(F,K);for(let t=0;t<nt.length;t+=1)nt[t].m(F,null);r(t,V,e),r(t,W,e)},p(t,n){if(e=n,t.newApplication&&(B.value=e.newApplication),t.removeApplication||t.data){let n;for(Q=e.data.applications,n=0;n<Q.length;n+=1){const a=dt(e,Q,n);tt[n]?tt[n].p(t,a):(tt[n]=ut(a),tt[n].c(),tt[n].m(P,null))}for(;n<tt.length;n+=1)tt[n].d(1);tt.length=Q.length}if(t.newTag&&(U.value=e.newTag),t.removeTag||t.data){let n;for(et=e.data.tags,n=0;n<et.length;n+=1){const a=st(e,et,n);nt[n]?nt[n].p(t,a):(nt[n]=pt(a),nt[n].c(),nt[n].m(F,null))}for(;n<nt.length;n+=1)nt[n].d(1);nt.length=et.length}},i:t,o:t,d(t){t&&c(n),t&&c(i),t&&c(o),s(tt,t),s(nt,t),t&&c(V),t&&c(W),a(G)}}}function mt(t,e,n){let a={tags:[],applications:[]},i="",o="",l=t=>{n("data",a.tags=a.tags.filter(e=>e!==t),a)},r=t=>{n("data",a.applications=a.applications.filter(e=>e!==t),a)},c=(t,e)=>{"Enter"===t.code&&("a"===e?(n("data",a.applications=a.applications||[],a),o&&o.length>0&&-1===a.applications.indexOf(o)&&(a.applications.push(o),n("newApplication",o=""))):"t"===e&&(n("data",a.tags=a.tags||[],a),i&&i.length>0&&-1===a.tags.indexOf(i)&&(a.tags.push(i),n("newTag",i=""))))};return{data:a,newTag:i,newApplication:o,submit:async()=>{a.name&&a.domain&&a.description&&(await fetch("/api/lexicon",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),nt.navigate("lexicon"))},changeTag:t=>{n("newTag",i=t.target.value)},removeTag:l,changeApplication:t=>{n("newApplication",o=t.target.value)},removeApplication:r,onkeyup:c,change_handler:t=>{n("data",a.domain=t.target.value,a)},change_handler_1:t=>{n("data",a.name=t.target.value,a)},change_handler_2:t=>{n("data",a.description=t.target.value,a)},change_handler_3:t=>{n("data",a.dataOwner=t.target.value,a)},keyup_handler:t=>c(t,"a"),click_handler:({application:t})=>r(t),keyup_handler_1:t=>c(t,"t"),click_handler_1:({tag:t})=>l(t)}}class gt extends X{constructor(t){super(),H(this,t,mt,ht,o,{})}}function ft(t,e,n){const a=Object.create(t);return a.tag=e[n],a}function vt(t,e,n){const a=Object.create(t);return a.application=e[n],a}function yt(t){let e,n,a,i,o,s,f=t.application+"";function v(...e){return t.click_handler(t,...e)}return{c(){e=d("div"),n=u(f),a=p(),(i=d("span")).textContent="X",o=p(),m(i,"class","delete svelte-1qonizy"),s=h(i,"click",v)},m(t,c){r(t,e,c),l(e,n),l(e,a),l(e,i),l(e,o)},p(e,a){t=a,e.data&&f!==(f=t.application+"")&&g(n,f)},d(t){t&&c(e),s()}}}function wt(t){let e,n,a,i,o,s,f=t.tag+"";function v(...e){return t.click_handler_1(t,...e)}return{c(){e=d("div"),n=u(f),a=p(),(i=d("span")).textContent="X",o=p(),m(i,"class","delete svelte-1qonizy"),s=h(i,"click",v)},m(t,c){r(t,e,c),l(e,n),l(e,a),l(e,i),l(e,o)},p(e,a){t=a,e.data&&f!==(f=t.tag+"")&&g(n,f)},d(t){t&&c(e),s()}}}function _t(e){let n,i,o,u,g,v,y,w,_,x,$,b,k,C,T,q,A,O,z,S,D,E,j,N,L,P,M,H,X,B,I,Y,F,R,Z,J,U,K,V,W,G,Q,tt,et,nt,at,it=e.data.applications,ot=[];for(let t=0;t<it.length;t+=1)ot[t]=yt(vt(e,it,t));let lt=e.data.tags,rt=[];for(let t=0;t<lt.length;t+=1)rt[t]=wt(ft(e,lt,t));return{c(){(n=d("h1")).textContent="Edit your something",i=p(),o=d("div"),u=d("form"),g=d("div"),v=d("div"),(y=d("label")).textContent="Domain:",w=p(),_=d("input"),$=p(),b=d("div"),(k=d("label")).textContent="Name:",C=p(),T=d("input"),A=p(),O=d("div"),(z=d("label")).textContent="Description:",S=p(),D=d("textarea"),j=p(),N=d("div"),(L=d("label")).textContent="Data owner:",P=p(),M=d("input"),X=p(),B=d("div"),I=d("div"),(Y=d("label")).textContent="Applications:",F=p(),R=d("div"),Z=d("input"),J=p();for(let t=0;t<ot.length;t+=1)ot[t].c();U=p(),K=d("div"),(V=d("label")).textContent="Tags:",W=p(),G=d("div"),Q=d("input"),tt=p();for(let t=0;t<rt.length;t+=1)rt[t].c();et=p(),(nt=d("button")).textContent="Save",m(n,"class","title"),m(y,"class","svelte-1qonizy"),_.value=x=e.data.domain,m(_,"class","svelte-1qonizy"),m(k,"class","svelte-1qonizy"),T.value=q=e.data.name,m(T,"class","svelte-1qonizy"),m(z,"class","svelte-1qonizy"),D.value=E=e.data.description,m(D,"class","svelte-1qonizy"),m(L,"class","svelte-1qonizy"),M.value=H=e.data.dataOwner,m(M,"class","svelte-1qonizy"),m(g,"class","left svelte-1qonizy"),m(Y,"class","svelte-1qonizy"),Z.value=e.newApplication,m(Z,"class","svelte-1qonizy"),m(R,"class","input"),f(I,"margin-bottom","1em"),m(V,"class","svelte-1qonizy"),Q.value=e.newTag,m(Q,"class","svelte-1qonizy"),m(G,"class","input"),m(B,"class","right svelte-1qonizy"),m(u,"class","svelte-1qonizy"),m(nt,"type","button"),m(nt,"class","svelte-1qonizy"),at=[h(_,"change",(function(){e.change_handler.apply(this,arguments)})),h(T,"change",(function(){e.change_handler_1.apply(this,arguments)})),h(D,"change",(function(){e.change_handler_2.apply(this,arguments)})),h(M,"change",(function(){e.change_handler_3.apply(this,arguments)})),h(Z,"change",e.changeApplication),h(Z,"keyup",e.keyup_handler),h(Q,"change",e.changeTag),h(Q,"keyup",e.keyup_handler_1),h(nt,"click",e.submit)]},m(t,e){r(t,n,e),r(t,i,e),r(t,o,e),l(o,u),l(u,g),l(g,v),l(v,y),l(v,w),l(v,_),l(g,$),l(g,b),l(b,k),l(b,C),l(b,T),l(g,A),l(g,O),l(O,z),l(O,S),l(O,D),l(g,j),l(g,N),l(N,L),l(N,P),l(N,M),l(u,X),l(u,B),l(B,I),l(I,Y),l(I,F),l(I,R),l(R,Z),l(I,J);for(let t=0;t<ot.length;t+=1)ot[t].m(I,null);l(B,U),l(B,K),l(K,V),l(K,W),l(K,G),l(G,Q),l(K,tt);for(let t=0;t<rt.length;t+=1)rt[t].m(K,null);l(o,et),l(o,nt)},p(t,n){if(e=n,t.data&&x!==(x=e.data.domain)&&(_.value=x),t.data&&q!==(q=e.data.name)&&(T.value=q),t.data&&E!==(E=e.data.description)&&(D.value=E),t.data&&H!==(H=e.data.dataOwner)&&(M.value=H),t.newApplication&&(Z.value=e.newApplication),t.removeApplication||t.data){let n;for(it=e.data.applications,n=0;n<it.length;n+=1){const a=vt(e,it,n);ot[n]?ot[n].p(t,a):(ot[n]=yt(a),ot[n].c(),ot[n].m(I,null))}for(;n<ot.length;n+=1)ot[n].d(1);ot.length=it.length}if(t.newTag&&(Q.value=e.newTag),t.removeTag||t.data){let n;for(lt=e.data.tags,n=0;n<lt.length;n+=1){const a=ft(e,lt,n);rt[n]?rt[n].p(t,a):(rt[n]=wt(a),rt[n].c(),rt[n].m(K,null))}for(;n<rt.length;n+=1)rt[n].d(1);rt.length=lt.length}},i:t,o:t,d(t){t&&c(n),t&&c(i),t&&c(o),s(ot,t),s(rt,t),a(at)}}}function xt(t,e,n){let a={tags:[],applications:[]};nt.$params(async t=>{var e=await fetch("/api/lexicon/"+t),i=await e.json();n("data",a=i)});let i="",o="",l=t=>{n("data",a.tags=a.tags.filter(e=>e!==t),a)},r=t=>{n("data",a.applications=a.applications.filter(e=>e!==t),a)},c=(t,e)=>{"Enter"===t.code&&("a"===e?(n("data",a.applications=a.applications||[],a),o&&o.length>0&&-1===a.applications.indexOf(o)&&(a.applications.push(o),n("newApplication",o=""))):"t"===e&&(n("data",a.tags=a.tags||[],a),i&&i.length>0&&-1===a.tags.indexOf(i)&&(a.tags.push(i),n("newTag",i=""))))};return{data:a,newTag:i,newApplication:o,submit:async()=>{a.name&&a.domain&&a.description&&(await fetch("/api/lexicon",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),nt.navigate("lexicon"))},changeTag:t=>{n("newTag",i=t.target.value)},removeTag:l,changeApplication:t=>{n("newApplication",o=t.target.value)},removeApplication:r,onkeyup:c,change_handler:t=>{n("data",a.domain=t.target.value,a)},change_handler_1:t=>{n("data",a.name=t.target.value,a)},change_handler_2:t=>{n("data",a.description=t.target.value,a)},change_handler_3:t=>{n("data",a.dataOwner=t.target.value,a)},keyup_handler:t=>c(t,"a"),click_handler:({application:t})=>r(t),keyup_handler_1:t=>c(t,"t"),click_handler_1:({tag:t})=>l(t)}}class $t extends X{constructor(t){super(),H(this,t,xt,_t,o,{})}}function bt(e){let n;return{c(){(n=d("div")).innerHTML='<div id="editor"></div>',m(n,"class","editor-container svelte-1ewzp2o")},m(t,e){r(t,n,e)},p:t,i:t,o:t,d(t){t&&c(n)}}}function kt(t){let e;return w(()=>{e=new CodeFlask("#editor",{language:"carlang",tabSize:4}),(async()=>{var t=await fetch("/api/module/"+nt.module),n=await t.text();e.updateCode(n)})(),window.addEventListener("keydown",(function(t){if("s"===String.fromCharCode(event.which).toLowerCase()&&!0===t.metaKey)return(async()=>{var t=e.getCode();await fetch("/api/module/"+nt.module,{method:"POST",headers:{"Content-Type":"text/plain","Content-Length":t.length.toString()},body:t})})(),t.preventDefault(),!1}))}),{}}class Ct extends X{constructor(t){super(),H(this,t,kt,bt,o,{})}}function Tt(e){let n,a,i,o,l,s,u,h,g,f,v;return{c(){(n=d("h2")).textContent="Domains",a=p(),(i=d("p")).textContent="Please give the domains you would like to restrict your lexicon to.",o=p(),l=d("textarea"),s=p(),(u=d("h2")).textContent="Owners",h=p(),(g=d("p")).textContent="Please give the owners you would like to restrict the lexicon to.",f=p(),v=d("textarea"),m(l,"class","svelte-nhavks"),m(v,"class","svelte-nhavks")},m(t,e){r(t,n,e),r(t,a,e),r(t,i,e),r(t,o,e),r(t,l,e),r(t,s,e),r(t,u,e),r(t,h,e),r(t,g,e),r(t,f,e),r(t,v,e)},p:t,i:t,o:t,d(t){t&&c(n),t&&c(a),t&&c(i),t&&c(o),t&&c(l),t&&c(s),t&&c(u),t&&c(h),t&&c(g),t&&c(f),t&&c(v)}}}class qt extends X{constructor(t){super(),H(this,t,null,Tt,o,{})}}function At(t){let e;const n=new Q({});return{c(){N(n.$$.fragment)},m(t,a){L(n,t,a),e=!0},i(t){e||(E(n.$$.fragment,t),e=!0)},o(t){j(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function Ot(t){let e;const n=new Ct({});return{c(){N(n.$$.fragment)},m(t,a){L(n,t,a),e=!0},i(t){e||(E(n.$$.fragment,t),e=!0)},o(t){j(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function zt(t){let e;const n=new qt({});return{c(){N(n.$$.fragment)},m(t,a){L(n,t,a),e=!0},i(t){e||(E(n.$$.fragment,t),e=!0)},o(t){j(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function St(t){let e;const n=new $t({});return{c(){N(n.$$.fragment)},m(t,a){L(n,t,a),e=!0},i(t){e||(E(n.$$.fragment,t),e=!0)},o(t){j(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function Dt(t){let e;const n=new gt({});return{c(){N(n.$$.fragment)},m(t,a){L(n,t,a),e=!0},i(t){e||(E(n.$$.fragment,t),e=!0)},o(t){j(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function Et(t){let e;const n=new ct({});return{c(){N(n.$$.fragment)},m(t,a){L(n,t,a),e=!0},i(t){e||(E(n.$$.fragment,t),e=!0)},o(t){j(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function jt(t){let e;const n=new Q({});return{c(){N(n.$$.fragment)},m(t,a){L(n,t,a),e=!0},i(t){e||(E(n.$$.fragment,t),e=!0)},o(t){j(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function Nt(e){let n,i,o,s,u,g,f,v,y,w,_=nt.module&&function(e){let n,i,o,l;return{c(){(n=d("span")).textContent="Editor",i=p(),(o=d("span")).textContent="Preview",m(n,"class","nav-button"),m(o,"class","nav-button"),l=[h(n,"click",e.click_handler_2),h(o,"click",e.click_handler_3)]},m(t,e){r(t,n,e),r(t,i,e),r(t,o,e)},p:t,d(t){t&&c(n),t&&c(i),t&&c(o),a(l)}}}(e);const x=[jt,Et,Dt,St,zt,Ot,At],$=[];function b(t,e){return"index"===e.route?0:"lexicon"===e.route?1:"add-lexicon"===e.route?2:"edit-lexicon"===e.route?3:"lexicon-admin"===e.route?4:"editor"===e.route?5:6}return f=b(0,e),v=$[f]=x[f](e),{c(){n=d("main"),(i=d("span")).textContent="Home",o=p(),(s=d("span")).textContent="Lexicon",u=p(),_&&_.c(),g=p(),v.c(),m(i,"class","nav-button"),m(s,"class","nav-button"),m(n,"class","svelte-1kds1eb"),w=[h(i,"click",e.click_handler),h(s,"click",e.click_handler_1)]},m(t,e){r(t,n,e),l(n,i),l(n,o),l(n,s),l(n,u),_&&_.m(n,null),l(n,g),$[f].m(n,null),y=!0},p(t,e){nt.module&&_.p(t,e);let a=f;(f=b(0,e))!==a&&(S(),j($[a],1,1,()=>{$[a]=null}),D(),(v=$[f])||(v=$[f]=x[f](e)).c(),E(v,1),v.m(n,null))},i(t){y||(E(v),y=!0)},o(t){j(v),y=!1},d(t){t&&c(n),_&&_.d(),$[f].d(),a(w)}}}function Lt(t,e,n){let a;nt.subscribe(t=>{n("route",a=t)});return{route:a,click_handler:()=>nt.navigate("index"),click_handler_1:()=>nt.navigate("lexicon"),click_handler_2:()=>nt.navigate("editor"),click_handler_3:()=>window.location.href=`/${nt.module}/index.html`}}const Pt=new class extends X{constructor(t){super(),H(this,t,Lt,Nt,o,{})}}({target:document.body,props:{name:"world"}});return Prism.languages.carlang={prolog:/<\?[\s\S]+?\?>/,keyword:/\b(?:type|alias|choice|data|flow|compose|loop)\b/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,chapter:/#.*\n/},Pt}();
//# sourceMappingURL=bundle.js.map
