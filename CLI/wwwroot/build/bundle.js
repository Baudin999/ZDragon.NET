var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function a(e){e.forEach(t)}function i(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t){e.appendChild(t)}function r(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode.removeChild(e)}function s(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function p(){return u(" ")}function h(e,t,n,a){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)}function m(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function g(e,t){t=""+t,e.data!==t&&(e.data=t)}function f(e,t,n,a){e.style.setProperty(t,n,a?"important":"")}let v;function y(e){v=e}function w(){if(!v)throw new Error("Function called outside component initialization");return v}const _=[],$=[],x=[],b=[],k=Promise.resolve();let C=!1;function T(e){x.push(e)}function q(){const e=new Set;do{for(;_.length;){const e=_.shift();y(e),A(e.$$)}for(;$.length;)$.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];e.has(n)||(n(),e.add(n))}x.length=0}while(_.length);for(;b.length;)b.pop()();C=!1}function A(e){null!==e.fragment&&(e.update(e.dirty),a(e.before_update),e.fragment&&e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(T))}const O=new Set;let z;function S(){z={r:0,c:[],p:z}}function E(){z.r||a(z.c),z=z.p}function D(e,t){e&&e.i&&(O.delete(e),e.i(t))}function j(e,t,n,a){if(e&&e.o){if(O.has(e))return;O.add(e),z.c.push(()=>{O.delete(e),a&&(n&&e.d(1),a())}),e.o(t)}}function L(e){e&&e.c()}function N(e,n,o){const{fragment:l,on_mount:r,on_destroy:c,after_update:s}=e.$$;l&&l.m(n,o),T(()=>{const n=r.map(t).filter(i);c?c.push(...n):a(n),e.$$.on_mount=[]}),s.forEach(T)}function P(e,t){const n=e.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx={})}function M(e,t){e.$$.dirty||(_.push(e),C||(C=!0,k.then(q)),e.$$.dirty=n()),e.$$.dirty[t]=!0}function H(t,i,o,l,r,c){const s=v;y(t);const d=i.props||{},u=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(s?s.$$.context:[]),callbacks:n(),dirty:null};let p=!1;u.ctx=o?o(t,d,(e,n,a=n)=>(u.ctx&&r(u.ctx[e],u.ctx[e]=a)&&(u.bound[e]&&u.bound[e](a),p&&M(t,e)),n)):d,u.update(),p=!0,a(u.before_update),u.fragment=!!l&&l(u.ctx),i.target&&(i.hydrate?u.fragment&&u.fragment.l(function(e){return Array.from(e.childNodes)}(i.target)):u.fragment&&u.fragment.c(),i.intro&&D(t.$$.fragment),N(t,i.target,i.anchor),q()),y(s)}class X{$destroy(){P(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function B(e){let t,n,a,i,o,s;return{c(){t=d("br"),n=p(),a=d("a"),i=u("Show me the data!"),m(a,"alt",o=e.descriptor.name),m(a,"href",s=`/api/data/${e.descriptor.module}/${e.descriptor.name}`)},m(e,o){r(e,t,o),r(e,n,o),r(e,a,o),l(a,i)},p(e,t){e.descriptor&&o!==(o=t.descriptor.name)&&m(a,"alt",o),e.descriptor&&s!==(s=`/api/data/${t.descriptor.module}/${t.descriptor.name}`)&&m(a,"href",s)},d(e){e&&c(t),e&&c(n),e&&c(a)}}}function I(t){let n,a,i,o,s,f,v,y,w,_,$,x,b,k,C,T,q,A,O,z,S,E,D=t.descriptor.descriptorType+"",j=t.descriptor.module+"",L=t.descriptor.parent?t.descriptor.parent+".":"",N=t.descriptor.name+"",P=(t.descriptor.description||"No Description")+"",M=t.descriptor.module+"",H="Type"===t.descriptor.descriptorType&&B(t);return{c(){n=d("div"),a=d("h2"),i=d("span"),o=u(D),s=p(),f=u(j),v=u(" - "),y=u(L),w=u(N),_=p(),$=d("p"),x=u(P),b=p(),k=d("a"),C=u("Module: "),T=u(M),O=p(),H&&H.c(),z=p(),S=d("div"),m(i,"class","pill svelte-a0oi16"),m(a,"class","svelte-a0oi16"),m($,"class","description svelte-a0oi16"),m(k,"alt",q=t.descriptor.module),m(k,"href",A=`/${t.descriptor.module}/index.html`),m(S,"id",t.id),m(n,"class","descriptor svelte-a0oi16"),E=h(n,"click",t.click_handler)},m(e,t){r(e,n,t),l(n,a),l(a,i),l(i,o),l(a,s),l(a,f),l(a,v),l(a,y),l(a,w),l(n,_),l(n,$),l($,x),l(n,b),l(n,k),l(k,C),l(k,T),l(n,O),H&&H.m(n,null),l(n,z),l(n,S)},p(e,t){e.descriptor&&D!==(D=t.descriptor.descriptorType+"")&&g(o,D),e.descriptor&&j!==(j=t.descriptor.module+"")&&g(f,j),e.descriptor&&L!==(L=t.descriptor.parent?t.descriptor.parent+".":"")&&g(y,L),e.descriptor&&N!==(N=t.descriptor.name+"")&&g(w,N),e.descriptor&&P!==(P=(t.descriptor.description||"No Description")+"")&&g(x,P),e.descriptor&&M!==(M=t.descriptor.module+"")&&g(T,M),e.descriptor&&q!==(q=t.descriptor.module)&&m(k,"alt",q),e.descriptor&&A!==(A=`/${t.descriptor.module}/index.html`)&&m(k,"href",A),"Type"===t.descriptor.descriptorType?H?H.p(e,t):((H=B(t)).c(),H.m(n,z)):H&&(H.d(1),H=null)},i:e,o:e,d(e){e&&c(n),H&&H.d(),E()}}}function Y(e,t,n){let{descriptor:a}=t,i=async e=>{let t=`/api/svg?module=${e.module}&name=${e.name}&type=g`,n=await fetch(t),a=await n.text();var i=document.getElementById(o);mermaid.render("inner-"+o,a,(e,t)=>{i.innerHTML=e},i)},o="mermaid-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)+"-"+Date.now();return e.$set=e=>{"descriptor"in e&&n("descriptor",a=e.descriptor)},{descriptor:a,selectNode:i,id:o,click_handler:()=>i(a)}}class F extends X{constructor(e){super(),H(this,e,Y,I,o,{descriptor:0})}}function R(t){let n;return{c(){(n=d("div")).innerHTML='<h2>Commands</h2> \n  <p>\n    This home page is not only a page where you can search items. This is also\n    the page where you can issue commands to the ZDragon backend system!\n  </p> \n  <p>You can use the following commands:</p> \n  <div class="command-container"><div class="command">modules:</div> \n    <span>This will search for all of the modules in the system.</span></div> \n\n  <div class="command-container"><div class="command">new: &lt;module name&gt;</div> \n    <span>\n      This will create a new module in the file system. You are free to choose\n      your own name for the module. Spaces will be changed to dots and every\n      word should start with a capital letter.\n    </span></div> \n\n  <div class="command-container"><div class="command">&lt;text&gt;</div> \n    <span>\n      This will let you free format search for the data in the repository.\n    </span></div> \n\n  <p>\n    Yes, the &quot;:&quot; should be at the end of a command. The &quot;:&quot; makes a command a\n    command! Commands can have terms behind them. For example, creating a new\n    modules is:\n  </p> \n  <p class="command">new: &lt;module name&gt;</p>',m(n,"class","help")},m(e,t){r(e,n,t)},p:e,i:e,o:e,d(e){e&&c(n)}}}class Z extends X{constructor(e){super(),H(this,e,null,R,o,{})}}function J(e,t,n){const a=Object.create(e);return a.d=t[n],a}function U(t){let n;return{c(){(n=d("div")).textContent="Your query returned no results."},m(e,t){r(e,n,t)},p:e,i:e,o:e,d(e){e&&c(n)}}}function K(e){let t,n,a=e.data,i=[];for(let t=0;t<a.length;t+=1)i[t]=V(J(e,a,t));const o=e=>j(i[e],1,1,()=>{i[e]=null});return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=u("")},m(e,a){for(let t=0;t<i.length;t+=1)i[t].m(e,a);r(e,t,a),n=!0},p(e,n){if(e.data){let l;for(a=n.data,l=0;l<a.length;l+=1){const o=J(n,a,l);i[l]?(i[l].p(e,o),D(i[l],1)):(i[l]=V(o),i[l].c(),D(i[l],1),i[l].m(t.parentNode,t))}for(S(),l=a.length;l<i.length;l+=1)o(l);E()}},i(e){if(!n){for(let e=0;e<a.length;e+=1)D(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)j(i[e]);n=!1},d(e){s(i,e),e&&c(t)}}}function V(e){let t;const n=new F({props:{descriptor:e.d}});return{c(){L(n.$$.fragment)},m(e,a){N(n,e,a),t=!0},p(e,t){const a={};e.data&&(a.descriptor=t.d),n.$set(a)},i(e){t||(D(n.$$.fragment,e),t=!0)},o(e){j(n.$$.fragment,e),t=!1},d(e){P(n,e)}}}function W(e){let t,n,a,i,o,s,u,g,f,v,y,w,_,$;const x=[K,U],b=[];function k(e,t){return t.data&&t.data.length>0?0:1}v=k(0,e),y=b[v]=x[v](e);const C=new Z({});return{c(){(t=d("h1")).textContent="Welcome to ZDragon!",n=p(),(a=d("p")).innerHTML='\n  Visit\n  <a href="https://zdragon.nl" target="_blank" rel="noopener noreferrer">\n    ZDragon.nl\n  </a>\n  to learn more about zdragon!\n',i=p(),o=d("div"),(s=d("h2")).textContent="Search your models:",u=p(),g=d("input"),f=p(),y.c(),w=p(),L(C.$$.fragment),m(t,"class","title"),m(g,"type","text"),$=h(g,"keyup",e.keyup_handler)},m(e,c){r(e,t,c),r(e,n,c),r(e,a,c),r(e,i,c),r(e,o,c),l(o,s),l(o,u),l(o,g),r(e,f,c),b[v].m(e,c),r(e,w,c),N(C,e,c),_=!0},p(e,t){let n=v;(v=k(0,t))===n?b[v].p(e,t):(S(),j(b[n],1,1,()=>{b[n]=null}),E(),(y=b[v])||(y=b[v]=x[v](t)).c(),D(y,1),y.m(w.parentNode,w))},i(e){_||(D(y),D(C.$$.fragment,e),_=!0)},o(e){j(y),j(C.$$.fragment,e),_=!1},d(e){e&&c(t),e&&c(n),e&&c(a),e&&c(i),e&&c(o),e&&c(f),b[v].d(e),e&&c(w),P(C,e),$()}}}function G(e,t,n){let a=[];const i=async e=>{try{var t=await fetch(`/api/search/${e||"nothing"}`);n("data",a=await t.json())}catch(e){console.log(e)}},o=async e=>{try{var t=await fetch("/api/modules/"+e,{method:"POST"});await t.json(),setTimeout(()=>{window.location.href=`/index.html?path=editor&module=${e}`},500)}catch(e){console.log(e)}};let l=e=>{"Enter"===e.code&&(async e=>{let[t,n,...a]=e.split(":");n||i(t),"modules"==t.trim()?i("modules:"):"new"==t.trim()&&n&&o(n.trim())})(e.target.value)};return{data:a,onkeyup:l,keyup_handler:e=>l(e)}}class Q extends X{constructor(e){super(),H(this,e,G,W,o,{})}}const ee=[];function te(t,n=e){let a;const i=[];function l(e){if(o(t,e)&&(t=e,a)){const e=!ee.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),ee.push(n,t)}if(e){for(let e=0;e<ee.length;e+=2)ee[e][0](ee[e+1]);ee.length=0}}}return{set:l,update:function(e){l(e(t))},subscribe:function(o,r=e){const c=[o,r];return i.push(c),1===i.length&&(a=n(l)||e),o(t),()=>{const e=i.indexOf(c);-1!==e&&i.splice(e,1),0===i.length&&(a(),a=null)}}}}var ne=new class{constructor(){this.route=te(ae("path")||"index"),this.params=te([]),this.module=ae("module")||null}navigate(e,...t){this.route.update(t=>e),this.params.update(e=>t||[]),function(e,t,n){n||(n=window.location.href);var a,i=new RegExp("([?&])"+e+"=.*?(&|#|$)(.*)","gi");if(!i.test(n)){if(null!=t){var o=-1!==n.indexOf("?")?"&":"?";return a=n.split("#"),n=a[0]+o+e+"="+t,void 0!==a[1]&&null!==a[1]&&(n+="#"+a[1]),window.location.href=n,n}return n}if(null==t)return a=n.split("#"),n=a[0].replace(i,"$1$3").replace(/(&|\?)$/,""),void 0!==a[1]&&null!==a[1]&&(n+="#"+a[1]),window.location.href=n,n;var l=n.replace(i,"$1"+e+"="+t+"$2$3");window.location.href=l}("path",e)}subscribe(e){this.route.subscribe(e)}$params(e){this.params.subscribe(e)}};function ae(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}function ie(e,t,n){const a=Object.create(e);return a.d=t[n],a}function oe(e){let t,n,i,o,s,f,v,y,w,_,$,x,b,k,C,T,q,A=e.d.domain+"",O=e.d.name+"",z=e.d.description+"",S=e.d.dataOwner+"";function E(...t){return e.click_handler_2(e,...t)}function D(...t){return e.click_handler_3(e,...t)}return{c(){t=d("div"),n=d("div"),i=u(A),o=p(),s=d("div"),f=u(O),v=p(),y=d("div"),w=u(z),_=p(),$=d("div"),x=u("Owner: "),b=u(S),k=p(),(C=d("span")).textContent="X",T=p(),m(n,"class","item--name svelte-q471s4"),m(s,"class","item--name svelte-q471s4"),m($,"class","item--description__owner svelte-q471s4"),m(y,"class","item--description svelte-q471s4"),m(C,"class","item__delete svelte-q471s4"),m(t,"class","item svelte-q471s4"),q=[h(s,"click",E),h(C,"click",D)]},m(e,a){r(e,t,a),l(t,n),l(n,i),l(t,o),l(t,s),l(s,f),l(t,v),l(t,y),l(y,w),l(y,_),l(y,$),l($,x),l($,b),l(t,k),l(t,C),l(t,T)},p(t,n){e=n,t.data&&A!==(A=e.d.domain+"")&&g(i,A),t.data&&O!==(O=e.d.name+"")&&g(f,O),t.data&&z!==(z=e.d.description+"")&&g(w,z),t.data&&S!==(S=e.d.dataOwner+"")&&g(b,S)},d(e){e&&c(t),a(q)}}}function le(t){let n,i,o,u,g,f,v,y,w,_,$,x,b,k,C,T=t.data,q=[];for(let e=0;e<T.length;e+=1)q[e]=oe(ie(t,T,e));return{c(){(n=d("h1")).textContent="Search your lexicon!",i=p(),o=d("div"),(u=d("span")).textContent="Create",g=p(),(f=d("span")).textContent="Admin",v=p(),(y=d("h2")).textContent="Search your lexicon:",w=p(),_=d("input"),$=p(),x=d("div"),(b=d("div")).innerHTML='<div class="item--name svelte-q471s4">Domain</div> \n    <div class="item--name svelte-q471s4">Name</div> \n    <div class="item--description svelte-q471s4">Description</div>',k=p();for(let e=0;e<q.length;e+=1)q[e].c();m(n,"class","title"),m(u,"class","nav-button"),m(f,"class","nav-button"),m(_,"type","text"),m(b,"class","item svelte-q471s4"),m(x,"class","items svelte-q471s4"),C=[h(u,"click",t.click_handler),h(f,"click",t.click_handler_1),h(_,"keyup",t.keyup_handler),h(_,"change",t.change_handler)]},m(e,t){r(e,n,t),r(e,i,t),r(e,o,t),l(o,u),l(o,g),l(o,f),l(o,v),l(o,y),l(o,w),l(o,_),r(e,$,t),r(e,x,t),l(x,b),l(x,k);for(let e=0;e<q.length;e+=1)q[e].m(x,null)},p(e,t){if(e.deleteItem||e.data||e.navigator){let n;for(T=t.data,n=0;n<T.length;n+=1){const a=ie(t,T,n);q[n]?q[n].p(e,a):(q[n]=oe(a),q[n].c(),q[n].m(x,null))}for(;n<q.length;n+=1)q[n].d(1);q.length=T.length}},i:e,o:e,d(e){e&&c(n),e&&c(i),e&&c(o),e&&c($),e&&c(x),s(q,e),a(C)}}}function re(e,t,n){let a=[],i="",o=async e=>{if(e){i=e;var t=await fetch("/api/lexicon?query="+i),o=await t.json();n("data",a=o||[])}},l=async e=>{alert("Only administrators are allowed to delete lexicon items.")},r=e=>{o(e)};return{data:a,findData:o,deleteItem:l,onkeyup:r,click_handler:()=>{ne.navigate("add-lexicon")},click_handler_1:()=>{ne.navigate("lexicon-admin")},keyup_handler:e=>"Enter"===e.code&&r(e.target.value),change_handler:e=>o(e.target.value),click_handler_2:({d:e})=>ne.navigate("edit-lexicon",e.id),click_handler_3:({d:e})=>l()}}class ce extends X{constructor(e){super(),H(this,e,re,le,o,{})}}function se(e,t,n){const a=Object.create(e);return a.tag=t[n],a}function de(e,t,n){const a=Object.create(e);return a.application=t[n],a}function ue(e){let t,n,a,i,o,s,f=e.application+"";function v(...t){return e.click_handler(e,...t)}return{c(){t=d("div"),n=u(f),a=p(),(i=d("span")).textContent="X",o=p(),m(i,"class","delete svelte-hsis99"),s=h(i,"click",v)},m(e,c){r(e,t,c),l(t,n),l(t,a),l(t,i),l(t,o)},p(t,a){e=a,t.data&&f!==(f=e.application+"")&&g(n,f)},d(e){e&&c(t),s()}}}function pe(e){let t,n,a,i,o,s,f=e.tag+"";function v(...t){return e.click_handler_1(e,...t)}return{c(){t=d("div"),n=u(f),a=p(),(i=d("span")).textContent="X",o=p(),m(i,"class","delete svelte-hsis99"),s=h(i,"click",v)},m(e,c){r(e,t,c),l(t,n),l(t,a),l(t,i),l(t,o)},p(t,a){e=a,t.data&&f!==(f=e.tag+"")&&g(n,f)},d(e){e&&c(t),s()}}}function he(t){let n,i,o,u,g,v,y,w,_,$,x,b,k,C,T,q,A,O,z,S,E,D,j,L,N,P,M,H,X,B,I,Y,F,R,Z,J,U,K,V,W,G,Q=t.data.applications,ee=[];for(let e=0;e<Q.length;e+=1)ee[e]=ue(de(t,Q,e));let te=t.data.tags,ne=[];for(let e=0;e<te.length;e+=1)ne[e]=pe(se(t,te,e));return{c(){(n=d("h1")).textContent="Create your Lexicon entry!",i=p(),o=d("form"),u=d("div"),g=d("div"),(v=d("label")).textContent="Domain:",y=p(),w=d("input"),_=p(),$=d("div"),(x=d("label")).textContent="Name:",b=p(),k=d("input"),C=p(),T=d("div"),(q=d("label")).textContent="Description:",A=p(),O=d("textarea"),z=p(),S=d("div"),(E=d("label")).textContent="Data owner:",D=p(),j=d("input"),L=p(),N=d("div"),P=d("div"),(M=d("label")).textContent="Applications:",H=p(),X=d("div"),B=d("input"),I=p();for(let e=0;e<ee.length;e+=1)ee[e].c();Y=p(),F=d("div"),(R=d("label")).textContent="Tags:",Z=p(),J=d("div"),U=d("input"),K=p();for(let e=0;e<ne.length;e+=1)ne[e].c();V=p(),(W=d("button")).textContent="Add",m(n,"class","title"),m(v,"class","svelte-hsis99"),m(w,"class","svelte-hsis99"),m(x,"class","svelte-hsis99"),m(k,"class","svelte-hsis99"),m(q,"class","svelte-hsis99"),m(O,"class","svelte-hsis99"),m(E,"class","svelte-hsis99"),m(j,"class","svelte-hsis99"),m(u,"class","left svelte-hsis99"),m(M,"class","svelte-hsis99"),B.value=t.newApplication,m(B,"class","svelte-hsis99"),m(X,"class","input"),f(P,"margin-bottom","1em"),m(R,"class","svelte-hsis99"),U.value=t.newTag,m(U,"class","svelte-hsis99"),m(J,"class","input"),m(N,"class","right svelte-hsis99"),m(o,"class","svelte-hsis99"),m(W,"type","button"),m(W,"class","svelte-hsis99"),G=[h(w,"change",(function(){t.change_handler.apply(this,arguments)})),h(k,"change",(function(){t.change_handler_1.apply(this,arguments)})),h(O,"change",(function(){t.change_handler_2.apply(this,arguments)})),h(j,"change",(function(){t.change_handler_3.apply(this,arguments)})),h(B,"change",t.changeApplication),h(B,"keyup",t.keyup_handler),h(U,"change",t.changeTag),h(U,"keyup",t.keyup_handler_1),h(W,"click",t.submit)]},m(e,t){r(e,n,t),r(e,i,t),r(e,o,t),l(o,u),l(u,g),l(g,v),l(g,y),l(g,w),l(u,_),l(u,$),l($,x),l($,b),l($,k),l(u,C),l(u,T),l(T,q),l(T,A),l(T,O),l(u,z),l(u,S),l(S,E),l(S,D),l(S,j),l(o,L),l(o,N),l(N,P),l(P,M),l(P,H),l(P,X),l(X,B),l(P,I);for(let e=0;e<ee.length;e+=1)ee[e].m(P,null);l(N,Y),l(N,F),l(F,R),l(F,Z),l(F,J),l(J,U),l(F,K);for(let e=0;e<ne.length;e+=1)ne[e].m(F,null);r(e,V,t),r(e,W,t)},p(e,n){if(t=n,e.newApplication&&(B.value=t.newApplication),e.removeApplication||e.data){let n;for(Q=t.data.applications,n=0;n<Q.length;n+=1){const a=de(t,Q,n);ee[n]?ee[n].p(e,a):(ee[n]=ue(a),ee[n].c(),ee[n].m(P,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=Q.length}if(e.newTag&&(U.value=t.newTag),e.removeTag||e.data){let n;for(te=t.data.tags,n=0;n<te.length;n+=1){const a=se(t,te,n);ne[n]?ne[n].p(e,a):(ne[n]=pe(a),ne[n].c(),ne[n].m(F,null))}for(;n<ne.length;n+=1)ne[n].d(1);ne.length=te.length}},i:e,o:e,d(e){e&&c(n),e&&c(i),e&&c(o),s(ee,e),s(ne,e),e&&c(V),e&&c(W),a(G)}}}function me(e,t,n){let a={tags:[],applications:[]},i="",o="",l=e=>{n("data",a.tags=a.tags.filter(t=>t!==e),a)},r=e=>{n("data",a.applications=a.applications.filter(t=>t!==e),a)},c=(e,t)=>{"Enter"===e.code&&("a"===t?(n("data",a.applications=a.applications||[],a),o&&o.length>0&&-1===a.applications.indexOf(o)&&(a.applications.push(o),n("newApplication",o=""))):"t"===t&&(n("data",a.tags=a.tags||[],a),i&&i.length>0&&-1===a.tags.indexOf(i)&&(a.tags.push(i),n("newTag",i=""))))};return{data:a,newTag:i,newApplication:o,submit:async()=>{a.name&&a.domain&&a.description&&(await fetch("/api/lexicon",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),ne.navigate("lexicon"))},changeTag:e=>{n("newTag",i=e.target.value)},removeTag:l,changeApplication:e=>{n("newApplication",o=e.target.value)},removeApplication:r,onkeyup:c,change_handler:e=>{n("data",a.domain=e.target.value,a)},change_handler_1:e=>{n("data",a.name=e.target.value,a)},change_handler_2:e=>{n("data",a.description=e.target.value,a)},change_handler_3:e=>{n("data",a.dataOwner=e.target.value,a)},keyup_handler:e=>c(e,"a"),click_handler:({application:e})=>r(e),keyup_handler_1:e=>c(e,"t"),click_handler_1:({tag:e})=>l(e)}}class ge extends X{constructor(e){super(),H(this,e,me,he,o,{})}}function fe(e,t,n){const a=Object.create(e);return a.tag=t[n],a}function ve(e,t,n){const a=Object.create(e);return a.application=t[n],a}function ye(e){let t,n,a,i,o,s,f=e.application+"";function v(...t){return e.click_handler(e,...t)}return{c(){t=d("div"),n=u(f),a=p(),(i=d("span")).textContent="X",o=p(),m(i,"class","delete svelte-1qonizy"),s=h(i,"click",v)},m(e,c){r(e,t,c),l(t,n),l(t,a),l(t,i),l(t,o)},p(t,a){e=a,t.data&&f!==(f=e.application+"")&&g(n,f)},d(e){e&&c(t),s()}}}function we(e){let t,n,a,i,o,s,f=e.tag+"";function v(...t){return e.click_handler_1(e,...t)}return{c(){t=d("div"),n=u(f),a=p(),(i=d("span")).textContent="X",o=p(),m(i,"class","delete svelte-1qonizy"),s=h(i,"click",v)},m(e,c){r(e,t,c),l(t,n),l(t,a),l(t,i),l(t,o)},p(t,a){e=a,t.data&&f!==(f=e.tag+"")&&g(n,f)},d(e){e&&c(t),s()}}}function _e(t){let n,i,o,u,g,v,y,w,_,$,x,b,k,C,T,q,A,O,z,S,E,D,j,L,N,P,M,H,X,B,I,Y,F,R,Z,J,U,K,V,W,G,Q,ee,te,ne,ae,ie=t.data.applications,oe=[];for(let e=0;e<ie.length;e+=1)oe[e]=ye(ve(t,ie,e));let le=t.data.tags,re=[];for(let e=0;e<le.length;e+=1)re[e]=we(fe(t,le,e));return{c(){(n=d("h1")).textContent="Edit your something",i=p(),o=d("div"),u=d("form"),g=d("div"),v=d("div"),(y=d("label")).textContent="Domain:",w=p(),_=d("input"),x=p(),b=d("div"),(k=d("label")).textContent="Name:",C=p(),T=d("input"),A=p(),O=d("div"),(z=d("label")).textContent="Description:",S=p(),E=d("textarea"),j=p(),L=d("div"),(N=d("label")).textContent="Data owner:",P=p(),M=d("input"),X=p(),B=d("div"),I=d("div"),(Y=d("label")).textContent="Applications:",F=p(),R=d("div"),Z=d("input"),J=p();for(let e=0;e<oe.length;e+=1)oe[e].c();U=p(),K=d("div"),(V=d("label")).textContent="Tags:",W=p(),G=d("div"),Q=d("input"),ee=p();for(let e=0;e<re.length;e+=1)re[e].c();te=p(),(ne=d("button")).textContent="Save",m(n,"class","title"),m(y,"class","svelte-1qonizy"),_.value=$=t.data.domain,m(_,"class","svelte-1qonizy"),m(k,"class","svelte-1qonizy"),T.value=q=t.data.name,m(T,"class","svelte-1qonizy"),m(z,"class","svelte-1qonizy"),E.value=D=t.data.description,m(E,"class","svelte-1qonizy"),m(N,"class","svelte-1qonizy"),M.value=H=t.data.dataOwner,m(M,"class","svelte-1qonizy"),m(g,"class","left svelte-1qonizy"),m(Y,"class","svelte-1qonizy"),Z.value=t.newApplication,m(Z,"class","svelte-1qonizy"),m(R,"class","input"),f(I,"margin-bottom","1em"),m(V,"class","svelte-1qonizy"),Q.value=t.newTag,m(Q,"class","svelte-1qonizy"),m(G,"class","input"),m(B,"class","right svelte-1qonizy"),m(u,"class","svelte-1qonizy"),m(ne,"type","button"),m(ne,"class","svelte-1qonizy"),ae=[h(_,"change",(function(){t.change_handler.apply(this,arguments)})),h(T,"change",(function(){t.change_handler_1.apply(this,arguments)})),h(E,"change",(function(){t.change_handler_2.apply(this,arguments)})),h(M,"change",(function(){t.change_handler_3.apply(this,arguments)})),h(Z,"change",t.changeApplication),h(Z,"keyup",t.keyup_handler),h(Q,"change",t.changeTag),h(Q,"keyup",t.keyup_handler_1),h(ne,"click",t.submit)]},m(e,t){r(e,n,t),r(e,i,t),r(e,o,t),l(o,u),l(u,g),l(g,v),l(v,y),l(v,w),l(v,_),l(g,x),l(g,b),l(b,k),l(b,C),l(b,T),l(g,A),l(g,O),l(O,z),l(O,S),l(O,E),l(g,j),l(g,L),l(L,N),l(L,P),l(L,M),l(u,X),l(u,B),l(B,I),l(I,Y),l(I,F),l(I,R),l(R,Z),l(I,J);for(let e=0;e<oe.length;e+=1)oe[e].m(I,null);l(B,U),l(B,K),l(K,V),l(K,W),l(K,G),l(G,Q),l(K,ee);for(let e=0;e<re.length;e+=1)re[e].m(K,null);l(o,te),l(o,ne)},p(e,n){if(t=n,e.data&&$!==($=t.data.domain)&&(_.value=$),e.data&&q!==(q=t.data.name)&&(T.value=q),e.data&&D!==(D=t.data.description)&&(E.value=D),e.data&&H!==(H=t.data.dataOwner)&&(M.value=H),e.newApplication&&(Z.value=t.newApplication),e.removeApplication||e.data){let n;for(ie=t.data.applications,n=0;n<ie.length;n+=1){const a=ve(t,ie,n);oe[n]?oe[n].p(e,a):(oe[n]=ye(a),oe[n].c(),oe[n].m(I,null))}for(;n<oe.length;n+=1)oe[n].d(1);oe.length=ie.length}if(e.newTag&&(Q.value=t.newTag),e.removeTag||e.data){let n;for(le=t.data.tags,n=0;n<le.length;n+=1){const a=fe(t,le,n);re[n]?re[n].p(e,a):(re[n]=we(a),re[n].c(),re[n].m(K,null))}for(;n<re.length;n+=1)re[n].d(1);re.length=le.length}},i:e,o:e,d(e){e&&c(n),e&&c(i),e&&c(o),s(oe,e),s(re,e),a(ae)}}}function $e(e,t,n){let a={tags:[],applications:[]};ne.$params(async e=>{var t=await fetch("/api/lexicon/"+e),i=await t.json();n("data",a=i)});let i="",o="",l=e=>{n("data",a.tags=a.tags.filter(t=>t!==e),a)},r=e=>{n("data",a.applications=a.applications.filter(t=>t!==e),a)},c=(e,t)=>{"Enter"===e.code&&("a"===t?(n("data",a.applications=a.applications||[],a),o&&o.length>0&&-1===a.applications.indexOf(o)&&(a.applications.push(o),n("newApplication",o=""))):"t"===t&&(n("data",a.tags=a.tags||[],a),i&&i.length>0&&-1===a.tags.indexOf(i)&&(a.tags.push(i),n("newTag",i=""))))};return{data:a,newTag:i,newApplication:o,submit:async()=>{a.name&&a.domain&&a.description&&(await fetch("/api/lexicon",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),ne.navigate("lexicon"))},changeTag:e=>{n("newTag",i=e.target.value)},removeTag:l,changeApplication:e=>{n("newApplication",o=e.target.value)},removeApplication:r,onkeyup:c,change_handler:e=>{n("data",a.domain=e.target.value,a)},change_handler_1:e=>{n("data",a.name=e.target.value,a)},change_handler_2:e=>{n("data",a.description=e.target.value,a)},change_handler_3:e=>{n("data",a.dataOwner=e.target.value,a)},keyup_handler:e=>c(e,"a"),click_handler:({application:e})=>r(e),keyup_handler_1:e=>c(e,"t"),click_handler_1:({tag:e})=>l(e)}}class xe extends X{constructor(e){super(),H(this,e,$e,_e,o,{})}}function be(t){let n,a,i,o;return{c(){(n=d("span")).textContent="Save",a=p(),(i=d("div")).innerHTML='<div id="editor"></div>',m(n,"class","nav-button"),m(i,"class","editor-container svelte-1ewzp2o"),o=h(n,"click",t.saveCode)},m(e,t){r(e,n,t),r(e,a,t),r(e,i,t)},p:e,i:e,o:e,d(e){e&&c(n),e&&c(a),e&&c(i),o()}}}function ke(e){let t,n=async()=>{var e=t.getCode();await fetch("/api/module/"+ne.module,{method:"POST",headers:{"Content-Type":"text/plain","Content-Length":e.length.toString()},body:e})};function a(e){if("s"===String.fromCharCode(event.which).toLowerCase()&&!0===e.metaKey)return n(),e.preventDefault(),!1}var i;return i=()=>{t=new CodeFlask("#editor",{language:"carlang",tabSize:4}),(async()=>{var e=await fetch("/api/module/"+ne.module),n=await e.text();t.updateCode(n)})(),window.addEventListener("keypress",a)},w().$$.on_mount.push(i),function(e){w().$$.on_destroy.push(e)}(()=>{window.removeEventListener("keypress",a)}),{saveCode:n}}class Ce extends X{constructor(e){super(),H(this,e,ke,be,o,{})}}function Te(t){let n,a,i,o,l,s,u,h,g,f,v;return{c(){(n=d("h2")).textContent="Domains",a=p(),(i=d("p")).textContent="Please give the domains you would like to restrict your lexicon to.",o=p(),l=d("textarea"),s=p(),(u=d("h2")).textContent="Owners",h=p(),(g=d("p")).textContent="Please give the owners you would like to restrict the lexicon to.",f=p(),v=d("textarea"),m(l,"class","svelte-nhavks"),m(v,"class","svelte-nhavks")},m(e,t){r(e,n,t),r(e,a,t),r(e,i,t),r(e,o,t),r(e,l,t),r(e,s,t),r(e,u,t),r(e,h,t),r(e,g,t),r(e,f,t),r(e,v,t)},p:e,i:e,o:e,d(e){e&&c(n),e&&c(a),e&&c(i),e&&c(o),e&&c(l),e&&c(s),e&&c(u),e&&c(h),e&&c(g),e&&c(f),e&&c(v)}}}class qe extends X{constructor(e){super(),H(this,e,null,Te,o,{})}}function Ae(e){let t;const n=new Q({});return{c(){L(n.$$.fragment)},m(e,a){N(n,e,a),t=!0},i(e){t||(D(n.$$.fragment,e),t=!0)},o(e){j(n.$$.fragment,e),t=!1},d(e){P(n,e)}}}function Oe(e){let t;const n=new Ce({});return{c(){L(n.$$.fragment)},m(e,a){N(n,e,a),t=!0},i(e){t||(D(n.$$.fragment,e),t=!0)},o(e){j(n.$$.fragment,e),t=!1},d(e){P(n,e)}}}function ze(e){let t;const n=new qe({});return{c(){L(n.$$.fragment)},m(e,a){N(n,e,a),t=!0},i(e){t||(D(n.$$.fragment,e),t=!0)},o(e){j(n.$$.fragment,e),t=!1},d(e){P(n,e)}}}function Se(e){let t;const n=new xe({});return{c(){L(n.$$.fragment)},m(e,a){N(n,e,a),t=!0},i(e){t||(D(n.$$.fragment,e),t=!0)},o(e){j(n.$$.fragment,e),t=!1},d(e){P(n,e)}}}function Ee(e){let t;const n=new ge({});return{c(){L(n.$$.fragment)},m(e,a){N(n,e,a),t=!0},i(e){t||(D(n.$$.fragment,e),t=!0)},o(e){j(n.$$.fragment,e),t=!1},d(e){P(n,e)}}}function De(e){let t;const n=new ce({});return{c(){L(n.$$.fragment)},m(e,a){N(n,e,a),t=!0},i(e){t||(D(n.$$.fragment,e),t=!0)},o(e){j(n.$$.fragment,e),t=!1},d(e){P(n,e)}}}function je(e){let t;const n=new Q({});return{c(){L(n.$$.fragment)},m(e,a){N(n,e,a),t=!0},i(e){t||(D(n.$$.fragment,e),t=!0)},o(e){j(n.$$.fragment,e),t=!1},d(e){P(n,e)}}}function Le(t){let n,i,o,s,u,g,f,v,y,w,_=ne.module&&function(t){let n,i,o,l;return{c(){(n=d("span")).textContent="Editor",i=p(),(o=d("span")).textContent="Preview",m(n,"class","nav-button"),m(o,"class","nav-button"),l=[h(n,"click",t.click_handler_2),h(o,"click",t.click_handler_3)]},m(e,t){r(e,n,t),r(e,i,t),r(e,o,t)},p:e,d(e){e&&c(n),e&&c(i),e&&c(o),a(l)}}}(t);const $=[je,De,Ee,Se,ze,Oe,Ae],x=[];function b(e,t){return"index"===t.route?0:"lexicon"===t.route?1:"add-lexicon"===t.route?2:"edit-lexicon"===t.route?3:"lexicon-admin"===t.route?4:"editor"===t.route?5:6}return f=b(0,t),v=x[f]=$[f](t),{c(){n=d("main"),(i=d("span")).textContent="Home",o=p(),(s=d("span")).textContent="Lexicon",u=p(),_&&_.c(),g=p(),v.c(),m(i,"class","nav-button"),m(s,"class","nav-button"),m(n,"class","svelte-1kds1eb"),w=[h(i,"click",t.click_handler),h(s,"click",t.click_handler_1)]},m(e,t){r(e,n,t),l(n,i),l(n,o),l(n,s),l(n,u),_&&_.m(n,null),l(n,g),x[f].m(n,null),y=!0},p(e,t){ne.module&&_.p(e,t);let a=f;(f=b(0,t))!==a&&(S(),j(x[a],1,1,()=>{x[a]=null}),E(),(v=x[f])||(v=x[f]=$[f](t)).c(),D(v,1),v.m(n,null))},i(e){y||(D(v),y=!0)},o(e){j(v),y=!1},d(e){e&&c(n),_&&_.d(),x[f].d(),a(w)}}}function Ne(e,t,n){let a;ne.subscribe(e=>{n("route",a=e)});return{route:a,click_handler:()=>ne.navigate("index"),click_handler_1:()=>ne.navigate("lexicon"),click_handler_2:()=>ne.navigate("editor"),click_handler_3:()=>window.location.href=`/${ne.module}/index.html`}}const Pe=new class extends X{constructor(e){super(),H(this,e,Ne,Le,o,{})}}({target:document.body,props:{name:"world"}});return Prism.languages.carlang={prolog:/<\?[\s\S]+?\?>/,keyword:/\b(?:type|alias|choice|data|flow|compose|loop)\b/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,chapter:/#.*\n/},Pe}();
//# sourceMappingURL=bundle.js.map
